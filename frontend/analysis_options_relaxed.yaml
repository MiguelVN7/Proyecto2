# EcoTrack - Balanced Static Code Analysis Configuration
# This configuration balances code quality with development productivity
# Focuses on critical issues while reducing excessive style warnings

# Base configuration from Flutter team's recommended lints
include: package:flutter_lints/flutter.yaml

analyzer:
  # Exclude generated files and build directories
  exclude:
    - "**/*.g.dart"
    - "**/*.freezed.dart"
    - "**/generated_plugin_registrant.dart"
    - "build/**"
    - "ios/**"
    - "android/**"
    - "web/**"
    - "linux/**"
    - "macos/**"
    - "windows/**"
  
  # Strong analysis mode for better error detection
  strong-mode:
    implicit-casts: false
    implicit-dynamic: false

linter:
  # Essential rules for code quality and error prevention
  rules:
    # CRITICAL: Naming conventions (REQUIRED)
    camel_case_types: true
    camel_case_extensions: true
    file_names: true
    library_names: true
    library_prefixes: true
    package_names: true
    constant_identifier_names: true
    non_constant_identifier_names: true
    
    # CRITICAL: Error prevention
    avoid_dynamic_calls: true
    avoid_empty_else: true
    cancel_subscriptions: true
    close_sinks: true
    hash_and_equals: true
    no_duplicate_case_values: true
    test_types_in_equals: true
    unrelated_type_equality_checks: true
    valid_regexps: true
    use_build_context_synchronously: true
    
    # IMPORTANT: Performance
    avoid_function_literals_in_foreach_calls: true
    prefer_collection_literals: true
    prefer_const_constructors: true
    prefer_const_constructors_in_immutables: true
    prefer_const_declarations: true
    
    # IMPORTANT: Flutter-specific
    avoid_unnecessary_containers: true
    avoid_web_libraries_in_flutter: true
    no_logic_in_create_state: true
    sized_box_for_whitespace: true
    use_colored_box: true
    use_decorated_box: true
    use_key_in_widget_constructors: true
    
    # STYLE: Code clarity (reduced strictness)
    prefer_single_quotes: true
    avoid_print: true
    
    # DISABLED: Overly strict style rules that create too many warnings
    # public_member_api_docs: false
    # package_api_docs: false
    # always_use_package_imports: false
    # prefer_final_locals: false
    # omit_local_variable_types: false
    # avoid_catches_without_on_clauses: false
    # prefer_expression_function_bodies: false
    # avoid_redundant_argument_values: false
    # directives_ordering: false
    # require_trailing_commas: false

# Dart Code Metrics with relaxed thresholds
dart_code_metrics:
  metrics:
    cyclomatic-complexity: 25     # Increased from 20
    maximum-nesting-level: 6      # Increased from 5  
    number-of-parameters: 6       # Increased from 4
    source-lines-of-code: 75      # Increased from 50
  rules:
    # Only critical anti-patterns
    - no-boolean-literal-compare
    - no-empty-block
    - no-equal-then-else
